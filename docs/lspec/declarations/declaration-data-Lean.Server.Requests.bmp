{"name":"Lean.Server.Requests","instances":[{"typeNames":["Lean.Server.RequestError"],"name":"Lean.Server.instInhabitedRequestError","className":"Inhabited"},{"typeNames":["IO","Lean.Server.RequestM"],"name":"Lean.Server.instMonadLiftIORequestM","className":"MonadLift"},{"typeNames":["EIO","Lean.Exception","Lean.Server.RequestM"],"name":"Lean.Server.instMonadLiftEIOExceptionRequestM","className":"MonadLift"}],"imports":["Init","Lean.DeclarationRange","Lean.Data.Json","Lean.Data.Lsp","Lean.Elab.Command","Lean.Server.FileSource","Lean.Server.FileWorker.Utils","Lean.Server.Rpc.Basic"],"declarations":[{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L248-L253","name":"Lean.Server.handleLspRequest","docLink":"./Lean/Server/Requests.html#Lean.Server.handleLspRequest","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L243-L246","name":"Lean.Server.routeLspRequest","docLink":"./Lean/Server/Requests.html#Lean.Server.routeLspRequest","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L224-L241","name":"Lean.Server.chainLspRequestHandler","docLink":"./Lean/Server/Requests.html#Lean.Server.chainLspRequestHandler","doc":"NB: This method may only be called in `initialize` blocks (user or builtin).\n\nRegister another handler to invoke after the last one registered for a method.\nAt least one handler for the method must have already been registered to perform\nchaining.\n\nFor more details on the registration of a handler, see `registerLspRequestHandler`. "},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L214-L215","name":"Lean.Server.lookupLspRequestHandler","docLink":"./Lean/Server/Requests.html#Lean.Server.lookupLspRequestHandler","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L197-L212","name":"Lean.Server.registerLspRequestHandler","docLink":"./Lean/Server/Requests.html#Lean.Server.registerLspRequestHandler","doc":"NB: This method may only be called in `initialize` blocks (user or builtin).\n\nA registration consists of:\n- a type of JSON-parsable request data `paramType`\n- a `FileSource` instance for it so the system knows where to route requests\n- a type of JSON-serializable response data `respType`\n- an actual `handler` which runs in the `RequestM` monad and is expected\n  to produce an asynchronous `RequestTask` which does any waiting/computation\n\nA handler task may be cancelled at any time, so it should check the cancellation token when possible\nto handle this cooperatively. Any exceptions thrown in a request handler will be reported to the client\nas LSP error responses. "},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L182-L182","name":"Lean.Server.requestHandlers","docLink":"./Lean/Server/Requests.html#Lean.Server.requestHandlers","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L178-L180","name":"Lean.Server.RequestHandler","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestHandler","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L160-L164","name":"Lean.Server.RequestM.runTermElabM","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.runTermElabM","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L153-L157","name":"Lean.Server.RequestM.runCoreM","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.runCoreM","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L147-L151","name":"Lean.Server.RequestM.runCommandElabM","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.runCommandElabM","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L136-L144","name":"Lean.Server.RequestM.withWaitFindSnapAtPos","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.withWaitFindSnapAtPos","doc":"Create a task which waits for the snapshot containing `lspPos` and executes `f` with it.\nIf no such snapshot exists, the request fails with an error. "},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L127-L132","name":"Lean.Server.RequestM.bindWaitFindSnap","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.bindWaitFindSnap","doc":"See `withWaitFindSnap`. "},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L119-L124","name":"Lean.Server.RequestM.withWaitFindSnap","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.withWaitFindSnap","doc":"Create a task which waits for the first snapshot matching `p`, handles various errors,\nand if a matching snapshot was found executes `x` with it. If not found, the task executes\n`notFoundX`. "},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L104-L114","name":"Lean.Server.RequestM.waitFindSnapAux","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.waitFindSnapAux","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L100-L102","name":"Lean.Server.RequestM.bindTask","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.bindTask","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L95-L98","name":"Lean.Server.RequestM.mapTask","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.mapTask","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L90-L93","name":"Lean.Server.RequestM.asTask","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.asTask","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L86-L88","name":"Lean.Server.RequestM.readDoc","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM.readDoc","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L76-L80","name":"Lean.Server.instMonadLiftEIOExceptionRequestM","docLink":"./Lean/Server/Requests.html#Lean.Server.instMonadLiftEIOExceptionRequestM","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L70-L74","name":"Lean.Server.instMonadLiftIORequestM","docLink":"./Lean/Server/Requests.html#Lean.Server.instMonadLiftIORequestM","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L68-L68","name":"Lean.Server.RequestM","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestM","doc":"Workers execute request handlers in this monad. "},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L66-L66","name":"Lean.Server.RequestT","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestT","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L65-L65","name":"Lean.Server.RequestTask","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestTask","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L58-L63","name":"Lean.Server.RequestContext","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestContext","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L52-L56","name":"Lean.Server.parseRequestParams","docLink":"./Lean/Server/Requests.html#Lean.Server.parseRequestParams","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L45-L48","name":"Lean.Server.RequestError.toLspResponseError","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.toLspResponseError","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L42-L43","name":"Lean.Server.RequestError.ofIoError","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.ofIoError","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L39-L40","name":"Lean.Server.RequestError.ofException","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.ofException","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L36-L37","name":"Lean.Server.RequestError.internalError","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.internalError","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L32-L34","name":"Lean.Server.RequestError.methodNotFound","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.methodNotFound","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L28-L30","name":"Lean.Server.RequestError.fileChanged","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError.fileChanged","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L23-L23","name":"Lean.Server.instInhabitedRequestError","docLink":"./Lean/Server/Requests.html#Lean.Server.instInhabitedRequestError","doc":""},{"sourceLink":"https://github.com/leanprover/lean4/blob/fbb858a32cee8090e5390df1fb688b032148645b/src/Lean/Server/Requests.lean#L20-L23","name":"Lean.Server.RequestError","docLink":"./Lean/Server/Requests.html#Lean.Server.RequestError","doc":""}]}
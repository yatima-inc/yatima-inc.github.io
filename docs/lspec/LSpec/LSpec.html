<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href=".././style.css"></link><link rel="stylesheet" href=".././src/pygments.css"></link><link rel="shortcut icon" href=".././favicon.ico"></link><link rel="prefetch" href=".././/declarations/declaration-data.bmp" as="image"></link><title>LSpec.LSpec</title><script defer="true" src=".././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT=".././";</script><script>const MODULE_NAME="LSpec.LSpec";</script><script type="module" src=".././nav.js"></script><script type="module" src=".././search.js"></script><script type="module" src=".././how-about.js"></script><script type="module" src=".././instances.js"></script><script type="module" src=".././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label>Documentation</h1><p class="header_filename break_within">LSpec.LSpec</p><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib_docs"></input><input type="text" name="q" autocomplete="off"></input><button>Google site search</button></form></header><nav class="internal_nav"><h3><a class="break_within" href="#top">LSpec.LSpec</a></h3><p class="gh_nav_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href=".././Init.html">Init</a></li><li><a href=".././Lean.html">Lean</a></li><li><a href=".././LSpec/SlimCheck/Checkable.html">LSpec.SlimCheck.Checkable</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-LSpec.LSpec" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#LSpec.Testable">LSpec.Testable</a></div><div class="nav_link"><a class="break_within" href="#LSpec.instTestable">LSpec.instTestable</a></div><div class="nav_link"><a class="break_within" href="#LSpec.instTestable_1">LSpec.instTestable_1</a></div><div class="nav_link"><a class="break_within" href="#LSpec.formatErrorMsg">LSpec.formatErrorMsg</a></div><div class="nav_link"><a class="break_within" href="#LSpec.TestSeq">LSpec.TestSeq</a></div><div class="nav_link"><a class="break_within" href="#LSpec.TestSeq.append">LSpec.TestSeq.append</a></div><div class="nav_link"><a class="break_within" href="#LSpec.instAppendTestSeq">LSpec.instAppendTestSeq</a></div><div class="nav_link"><a class="break_within" href="#LSpec.test">LSpec.test</a></div><div class="nav_link"><a class="break_within" href="#LSpec.check">LSpec.check</a></div><div class="nav_link"><a class="break_within" href="#LSpec.ExpectationFailure">LSpec.ExpectationFailure</a></div><div class="nav_link"><a class="break_within" href="#LSpec.instTestableExpectationFailure">LSpec.instTestableExpectationFailure</a></div><div class="nav_link"><a class="break_within" href="#LSpec.withOptionSome">LSpec.withOptionSome</a></div><div class="nav_link"><a class="break_within" href="#LSpec.withOptionNone">LSpec.withOptionNone</a></div><div class="nav_link"><a class="break_within" href="#LSpec.withExceptOk">LSpec.withExceptOk</a></div><div class="nav_link"><a class="break_within" href="#LSpec.withExceptError">LSpec.withExceptError</a></div><div class="nav_link"><a class="break_within" href="#LSpec.TestSeq.run">LSpec.TestSeq.run</a></div><div class="nav_link"><a class="break_within" href="#LSpec.TestSeq.run.aux">LSpec.TestSeq.run.aux</a></div><div class="nav_link"><a class="break_within" href="#LSpec.runInTermElabMAsUnit">LSpec.runInTermElabMAsUnit</a></div><div class="nav_link"><a class="break_within" href="#LSpec.«command#lspec_»">LSpec.«command#lspec_»</a></div><div class="nav_link"><a class="break_within" href="#LSpec.MonadEmit">LSpec.MonadEmit</a></div><div class="nav_link"><a class="break_within" href="#LSpec.TestSeq.runM">LSpec.TestSeq.runM</a></div><div class="nav_link"><a class="break_within" href="#LSpec.MonadTest">LSpec.MonadTest</a></div><div class="nav_link"><a class="break_within" href="#LSpec.succeed">LSpec.succeed</a></div><div class="nav_link"><a class="break_within" href="#LSpec.fail">LSpec.fail</a></div><div class="nav_link"><a class="break_within" href="#LSpec.lspecM">LSpec.lspecM</a></div><div class="nav_link"><a class="break_within" href="#LSpec.lspecEachM">LSpec.lspecEachM</a></div><div class="nav_link"><a class="break_within" href="#LSpec.instMonadEmitIOInstMonadEIOError">LSpec.instMonadEmitIOInstMonadEIOError</a></div><div class="nav_link"><a class="break_within" href="#LSpec.instMonadTestIOInstMonadEIOErrorUInt32">LSpec.instMonadTestIOInstMonadEIOErrorUInt32</a></div><div class="nav_link"><a class="break_within" href="#LSpec.lspecIO">LSpec.lspecIO</a></div><div class="nav_link"><a class="break_within" href="#LSpec.lspecEachIO">LSpec.lspecEachIO</a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-core-LSpec-framework">The core <code><a href=".././LSpec.html">LSpec</a></code> framework <a class="hover-link" href="#The-core-LSpec-framework">#</a></h1><h2 class="markdown-heading" id="TODO-Add-all-relavent-documentation">TODO: Add all relavent documentation <a class="hover-link" href="#TODO-Add-all-relavent-documentation">#</a></h2><h2 class="markdown-heading" id="Tags">Tags <a class="hover-link" href="#Tags">#</a></h2><p>testing frameworks</p><h2 class="markdown-heading" id="References">References <a class="hover-link" href="#References">#</a></h2><ul>
<li>https://hackage.haskell.org/package/hspec</li>
</ul></div><div class="decl" id="LSpec.Testable"><div class="class"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L29-L33">source</a></div><div class="decl_header"><span class="decl_kind">class inductive</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a></span><span class="decl_args">
<span class="fn">(p : <span class="fn">Prop</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><ul class="constructors"><li class="constructor" id="LSpec.Testable.isTrue">isTrue: <span class="fn">{<span class="fn">p</span> : <span class="fn">Prop</span>} → <span class="fn"><span class="fn">p</span> → <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span></span></span></li><li class="constructor" id="LSpec.Testable.isMaybe">isMaybe: <span class="fn">{<span class="fn">p</span> : <span class="fn">Prop</span>} → <span class="fn"><span class="fn"><a href=".././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././Init/Prelude.html#String">String</a></span>) <span class="fn">none</span></span> → <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span></span></span></li><li class="constructor" id="LSpec.Testable.isFalse">isFalse: <span class="fn">{<span class="fn">p</span> : <span class="fn">Prop</span>} → <span class="fn"><span class="fn"><a href=".././Init/Prelude.html#Not">¬</a><span class="fn">p</span></span> → <span class="fn"><span class="fn"><a href=".././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././Init/Prelude.html#String">String</a></span>) <span class="fn">none</span></span> → <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span></span></span></span></li><li class="constructor" id="LSpec.Testable.isFailure">isFailure: <span class="fn">{<span class="fn">p</span> : <span class="fn">Prop</span>} → <span class="fn"><span class="fn"><a href=".././Init/Prelude.html#optParam">optParam</a> (<span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././Init/Prelude.html#String">String</a></span>) <span class="fn">none</span></span> → <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span></span></span></li></ul><h1 class="markdown-heading" id="TODO-No-longer-accurate">TODO: No longer accurate <a class="hover-link" href="#TODO-No-longer-accurate">#</a></h1><p>A variant of <code><a href=".././Init/Prelude.html#Decidable">Decidable</a></code> for tests.</p><p>In the failing case, it may contain an explanatory message.</p><details class="instances"><summary>Instances</summary><ul id="instances-list-LSpec.Testable" class="instances-list"></ul></details></div></div><div class="decl" id="LSpec.instTestable"><div class="instance"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L36-L39">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.instTestable">LSpec.instTestable</a></span><span class="decl_args">
<span class="fn">(p : <span class="fn">Prop</span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[d : <span class="fn"><a href=".././Init/Prelude.html#Decidable">Decidable</a> <span class="fn">p</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span></div></div><p>A default <code><a href=".././LSpec/LSpec.html#LSpec.Testable">Testable</a></code> instance with low priority.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.instTestable">LSpec.instTestable</a> <span class="fn">p</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">d</span> with
  | <span class="fn"><a href=".././Init/Prelude.html#Decidable.isTrue">isFalse</a> <span class="fn">h</span></span> =&gt <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable.isFalse">LSpec.Testable.isFalse</a> <span class="fn">h</span> (<span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">&quotEvaluated to false&quot</span></span>)</span>
  | <span class="fn"><a href=".././Init/Prelude.html#Decidable.isTrue">isTrue</a> <span class="fn">h</span></span> =&gt <span class="fn"><a href=".././Init/Prelude.html#Decidable.isTrue">LSpec.Testable.isTrue</a> <span class="fn">h</span></span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.instTestable_1"><div class="instance"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L42-L49">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.instTestable_1">LSpec.instTestable_1</a></span><span class="decl_args">
<span class="fn">(p : <span class="fn">Prop</span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/SlimCheck/Checkable.html#SlimCheck.Checkable">SlimCheck.Checkable</a> <span class="fn">p</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.formatErrorMsg"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L52-L54">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.formatErrorMsg">LSpec.formatErrorMsg</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <a href=".././Init/Prelude.html#String">String</a></span> → <a href=".././Init/Prelude.html#String">String</a></span></div></div><p>Formats the extra error message from <code><a href=".././LSpec/LSpec.html#LSpec.Testable">Testable</a></code> failures.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.formatErrorMsg">LSpec.formatErrorMsg</a> <span class="fn">_fun_discr</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">_fun_discr</span> with
  | <span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">msg</span></span> =&gt <span class="fn"><span class="fn"><span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">&quot\n    &quot</span></span> <a href=".././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">msg</span></span></span> <a href=".././Init/Prelude.html#HAppend.hAppend">++</a> <span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">&quot&quot</span></span></span>
  | <span class="fn">none</span> =&gt <span class="fn">&quot&quot</span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.TestSeq"><div class="inductive"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L59-L61">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type</span></div></div><ul class="constructors"><li class="constructor" id="LSpec.TestSeq.more">more: <span class="fn"><a href=".././Init/Prelude.html#String">String</a> → <span class="fn">(<span class="fn">prop</span> : <span class="fn">Prop</span>) → <span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">prop</span></span> → <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> → <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span></span></span></span></li><li class="constructor" id="LSpec.TestSeq.done">done: <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></li></ul><p>The datatype used to represent a sequence of tests</p><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-LSpec.TestSeq" class="instances-for-list"></ul></details></div></div><div class="decl" id="LSpec.TestSeq.append"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L64-L66">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.TestSeq.append">LSpec.TestSeq.append</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> → <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> → <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span></div></div><p>Appends two sequences of tests.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.append">LSpec.TestSeq.append</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq.done">LSpec.TestSeq.done</a> <span class="fn">_fun_discr</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">_fun_discr</span></span></li><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.append">LSpec.TestSeq.append</a> (<span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.more">LSpec.TestSeq.more</a> <span class="fn">d</span> <span class="fn">p</span> <span class="fn">i</span> <span class="fn">n</span></span>) <span class="fn">_fun_discr</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.more">LSpec.TestSeq.more</a> <span class="fn">d</span> <span class="fn">p</span> <span class="fn">i</span> (<span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.append">LSpec.TestSeq.append</a> <span class="fn">n</span> <span class="fn">_fun_discr</span></span>)</span></span></li></ul></details></div></div><div class="decl" id="LSpec.instAppendTestSeq"><div class="instance"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L68-L69">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.instAppendTestSeq">LSpec.instAppendTestSeq</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Append">Append</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.instAppendTestSeq">LSpec.instAppendTestSeq</a> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">append</span> := <a href=".././LSpec/LSpec.html#LSpec.TestSeq.append">LSpec.TestSeq.append</a> }</span></span></li></ul></details></div></div><div class="decl" id="LSpec.test"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L75-L77">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.test">LSpec.test</a></span><span class="decl_args">
<span class="fn">(descr : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(p : <span class="fn">Prop</span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> <span class="fn">p</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(next : <span class="fn"><a href=".././Init/Prelude.html#optParam">optParam</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq.done">LSpec.TestSeq.done</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></div></div><p>Allows the composition of tests with propositions for which a <code><a href=".././LSpec/LSpec.html#LSpec.Testable">Testable</a></code>
instance exists.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.test">LSpec.test</a> <span class="fn">descr</span> <span class="fn">p</span> <span class="fn">next</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.more">LSpec.TestSeq.more</a> <span class="fn">descr</span> <span class="fn">p</span> <span class="fn">inferInstance</span> <span class="fn">next</span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.check"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L81-L84">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.check">LSpec.check</a></span><span class="decl_args">
<span class="fn">(descr : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(p : <span class="fn">Prop</span>)</span></span>
<span class="decl_args">
<span class="fn">(p' : <span class="fn"><a href=".././Init/Meta.html#autoParam">autoParam</a> (<span class="fn"><a href=".././LSpec/SlimCheck/Checkable.html#SlimCheck.Decorations.DecorationsOf">SlimCheck.Decorations.DecorationsOf</a> <span class="fn">p</span></span>) <a href=".././LSpec/LSpec.html#_auto._@.LSpec.LSpec._hyg.352">_auto✝</a></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/SlimCheck/Checkable.html#SlimCheck.Checkable">SlimCheck.Checkable</a> <span class="fn">p'</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(next : <span class="fn"><a href=".././Init/Prelude.html#optParam">optParam</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq.done">LSpec.TestSeq.done</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></div></div><p>TODO: Add documentation</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.check">LSpec.check</a> <span class="fn">descr</span> <span class="fn">p</span> <span class="fn">next</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.test">LSpec.test</a> <span class="fn">descr</span> <span class="fn">p'</span> <span class="fn">next</span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.ExpectationFailure"><div class="inductive"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L86-L86">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.ExpectationFailure">LSpec.ExpectationFailure</a></span><span class="decl_args">
<span class="fn">(exp : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(got : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Prop</span></div></div><ul class="constructors"></ul><details class="instances"><summary>Instances For</summary><ul id="instances-for-list-LSpec.ExpectationFailure" class="instances-for-list"></ul></details></div></div><div class="decl" id="LSpec.instTestableExpectationFailure"><div class="instance"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L88-L89">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.instTestableExpectationFailure">LSpec.instTestableExpectationFailure</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{exp : <a href=".././Init/Prelude.html#String">String</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{got : <a href=".././Init/Prelude.html#String">String</a>}</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.Testable">LSpec.Testable</a> (<span class="fn"><a href=".././LSpec/LSpec.html#LSpec.ExpectationFailure">LSpec.ExpectationFailure</a> <span class="fn">exp</span> <span class="fn">got</span></span>)</span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.withOptionSome"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L92-L96">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.withOptionSome">LSpec.withOptionSome</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_1</span>}</span></span>
</span><span class="decl_args">
<span class="fn">(descr : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(opt : <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">α</span> → <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></div></div><p>A test pipeline to run a function assuming that <code>opt</code> is <code><a href=".././Init/Prelude.html#Option.some">Option.some</a> _</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.withOptionSome">LSpec.withOptionSome</a> <span class="fn">descr</span> <span class="fn">opt</span> <span class="fn">f</span></span> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">match <span class="fn">opt</span> with
  | <span class="fn">none</span> =&gt <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.test">LSpec.test</a> <span class="fn">descr</span> (<span class="fn"><a href=".././LSpec/LSpec.html#LSpec.ExpectationFailure">LSpec.ExpectationFailure</a> <span class="fn">&quotsome _&quot</span> <span class="fn">&quotnone&quot</span></span>)</span>
  | <span class="fn"><a href=".././Init/Prelude.html#Option.some">some</a> <span class="fn">a</span></span> =&gt <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.test">LSpec.test</a> <span class="fn">descr</span> (<span class="fn"><a href=".././Init/Prelude.html#Bool.true">true</a> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span>) (<span class="fn"><span class="fn">f</span> <span class="fn">a</span></span>)</span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.withOptionNone"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L99-L103">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.withOptionNone">LSpec.withOptionNone</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_1</span>}</span></span>
</span><span class="decl_args">
<span class="fn">(descr : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(opt : <span class="fn"><a href=".././Init/Prelude.html#Option">Option</a> <span class="fn">α</span></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString">ToString</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(f : <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></div></div><p>A test pipeline to run a function assuming that <code>opt</code> is <code><a href=".././Init/Prelude.html#Option.none">Option.none</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.withExceptOk"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L106-L110">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.withExceptOk">LSpec.withExceptOk</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ε : <span class="fn">Type u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_2</span>}</span></span>
</span><span class="decl_args">
<span class="fn">(descr : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(exc : <span class="fn"><a href=".././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">α</span></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString">ToString</a> <span class="fn">ε</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">α</span> → <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></div></div><p>A test pipeline to run a function assuming that <code>exc</code> is <code><a href=".././Init/Prelude.html#Except.ok">Except.ok</a> _</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.withExceptError"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L113-L117">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.withExceptError">LSpec.withExceptError</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ε : <span class="fn">Type u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_2</span>}</span></span>
</span><span class="decl_args">
<span class="fn">(descr : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args">
<span class="fn">(exc : <span class="fn"><a href=".././Init/Prelude.html#Except">Except</a> <span class="fn">ε</span> <span class="fn">α</span></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Data/ToString/Basic.html#ToString">ToString</a> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">ε</span> → <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></div></div><p>A test pipeline to run a function assuming that <code>exc</code> is <code><a href=".././Init/Prelude.html#Except.error">Except.error</a> _</code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.TestSeq.run"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L124-L137">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.TestSeq.run">LSpec.TestSeq.run</a></span><span class="decl_args">
<span class="fn">(tSeq : <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/Prelude.html#Bool">Bool</a> <a href=".././Init/Prelude.html#Prod">×</a> <a href=".././Init/Prelude.html#String">String</a></span></div></div><p>A generic runner for <code><a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.run">LSpec.TestSeq.run</a> <span class="fn">tSeq</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.run.aux">LSpec.TestSeq.run.aux</a> <span class="fn">&quot&quot</span> <span class="fn">tSeq</span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.TestSeq.run.aux"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L125-L136">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.TestSeq.run.aux">LSpec.TestSeq.run.aux</a></span><span class="decl_args">
<span class="fn">(acc : <a href=".././Init/Prelude.html#String">String</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> → <span class="fn"><a href=".././Init/Prelude.html#Bool">Bool</a> <a href=".././Init/Prelude.html#Prod">×</a> <a href=".././Init/Prelude.html#String">String</a></span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.run.aux">LSpec.TestSeq.run.aux</a> <span class="fn">acc</span> <a href=".././LSpec/LSpec.html#LSpec.TestSeq.done">LSpec.TestSeq.done</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">(<a href=".././Init/Prelude.html#Bool.true">true</a>, <span class="fn">acc</span>)</span></span></li></ul></details></div></div><div class="decl" id="LSpec.runInTermElabMAsUnit"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L144-L147">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.runInTermElabMAsUnit">LSpec.runInTermElabMAsUnit</a></span><span class="decl_args">
<span class="fn">(tSeq : <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Lean/Elab/Term.html#Lean.Elab.Term.TermElabM">Lean.Elab.TermElabM</a> <a href=".././Init/Prelude.html#Unit">Unit</a></span></div></div><p>Runs a <code><a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code> with an output meant for the Lean Infoview.
This function is meant to be called from a custom command. It runs in
<code>TermElabM</code> to have access to <code>logInfo</code> and <code>throwError</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.«command#lspec_»"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L149-L156">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.«command#lspec_»">LSpec.«command#lspec_»</a></span><span class="decl_args"> :</span><div class="decl_type"><a href=".././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>A custom command to run <code><a href=".././LSpec.html">LSpec</a></code> tests. Example:</p><pre><code class="language-lean">#lspec <a href=".././LSpec/LSpec.html#LSpec.test">test</a> "four equals four" (4 = 4)
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.«command#lspec_»">LSpec.«command#lspec_»</a> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href=".././Init/Prelude.html#Lean.ParserDescr.node">Lean.ParserDescr.node</a> <span class="fn">`LSpec.«command#lspec_»</span> <span class="fn">1022</span>
    (<span class="fn"><a href=".././Init/Prelude.html#Lean.ParserDescr.binary">Lean.ParserDescr.binary</a> <span class="fn">`andthen</span> (<span class="fn"><a href=".././Init/Prelude.html#Lean.ParserDescr.symbol">Lean.ParserDescr.symbol</a> <span class="fn">&quot#lspec &quot</span></span>) (<span class="fn"><a href=".././Init/Prelude.html#Lean.ParserDescr.cat">Lean.ParserDescr.cat</a> <span class="fn">`term</span> <span class="fn">0</span></span>)</span>)</span></span></li></ul></details></div></div><div class="decl" id="LSpec.MonadEmit"><div class="class"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L163-L164">source</a></div><div class="decl_header"><span class="decl_kind">class</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.MonadEmit">LSpec.MonadEmit</a></span><span class="decl_args">
<span class="fn">(m : <span class="fn"><span class="fn">Type</span> → <span class="fn">Type u_1</span></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn">Type u_1</span></div></div><ul class="structure_fields" id="LSpec.MonadEmit.mk"><li id="LSpec.MonadEmit.emit" class="structure_field"><div class="structure_field_info">emit : <span class="fn"><a href=".././Init/Prelude.html#String">String</a> → <span class="fn"><span class="fn">m</span> <a href=".././Init/Prelude.html#Unit">Unit</a></span></span></div></li></ul><details class="instances"><summary>Instances</summary><ul id="instances-list-LSpec.MonadEmit" class="instances-list"></ul></details></div></div><div class="decl" id="LSpec.TestSeq.runM"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L169-L176">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.TestSeq.runM">LSpec.TestSeq.runM</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type</span> → <span class="fn">Type u_1</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadEmit">LSpec.MonadEmit</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a> → <span class="fn"><span class="fn">m</span> <a href=".././Init/Prelude.html#Bool">Bool</a></span></span></div></div><p>A monadic runner that emits test outputs as they're produced.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.runM">LSpec.TestSeq.runM</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq.done">LSpec.TestSeq.done</a></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#Pure.pure">pure</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span></span></li></ul></details></div></div><div class="decl" id="LSpec.MonadTest"><div class="class"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L178-L181">source</a></div><div class="decl_header"><span class="decl_kind">class</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.MonadTest">LSpec.MonadTest</a></span><span class="decl_args">
<span class="fn">(m : <span class="fn"><span class="fn">Type u_1</span> → <span class="fn">Type u_2</span></span>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(α : <span class="fn">Sort u_3</span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">Sort (max 1 u_3)</span></div></div><ul class="structure_fields" id="LSpec.MonadTest.mk"><li id="LSpec.MonadTest.success" class="structure_field"><div class="structure_field_info">success : <span class="fn">α</span></div></li><li id="LSpec.MonadTest.failure" class="structure_field"><div class="structure_field_info">failure : <span class="fn">α</span></div></li><li id="LSpec.MonadTest.nEq" class="structure_field"><div class="structure_field_info">nEq : <span class="fn"><span class="fn">success</span> <a href=".././Init/Core.html#Ne">≠</a> <span class="fn">failure</span></span></div></li></ul><details class="instances"><summary>Instances</summary><ul id="instances-list-LSpec.MonadTest" class="instances-list"></ul></details></div></div><div class="decl" id="LSpec.succeed"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L183-L184">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.succeed">LSpec.succeed</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type u_1</span> → <span class="fn">Type u_2</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest">LSpec.MonadTest</a> <span class="fn">m</span> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">LSpec.succeed</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest.success">LSpec.MonadTest.success</a> <span class="fn">m</span></span>)</span></span></li></ul></details></div></div><div class="decl" id="LSpec.fail"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L186-L187">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.fail">LSpec.fail</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type u_1</span> → <span class="fn">Type u_2</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_1</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest">LSpec.MonadTest</a> <span class="fn">m</span> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn">LSpec.fail</span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././Init/Prelude.html#Pure.pure">pure</a> (<span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest.failure">LSpec.MonadTest.failure</a> <span class="fn">m</span></span>)</span></span></li></ul></details></div></div><div class="decl" id="LSpec.lspecM"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L190-L192">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.lspecM">LSpec.lspecM</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type</span> → <span class="fn">Type u_1</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadEmit">LSpec.MonadEmit</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest">LSpec.MonadTest</a> <span class="fn">m</span> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(t : <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Runs a <code><a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code> in a monad with <code><a href=".././LSpec/LSpec.html#LSpec.MonadEmit">MonadEmit</a></code> and <code><a href=".././LSpec/LSpec.html#LSpec.MonadTest">MonadTest</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.lspecM">LSpec.lspecM</a> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let a ← <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.TestSeq.runM">LSpec.TestSeq.runM</a> <span class="fn">t</span></span>
  <span class="fn">if <span class="fn"><span class="fn">a</span> <a href=".././Init/Prelude.html#Eq">=</a> <a href=".././Init/Prelude.html#Bool.true">true</a></span> then <span class="fn">LSpec.succeed</span> else <span class="fn">LSpec.fail</span></span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.lspecEachM"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L198-L202">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.lspecEachM">LSpec.lspecEachM</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><span class="fn">Type</span> → <span class="fn">Type u_1</span></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{β : <span class="fn">Type u_2</span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadEmit">LSpec.MonadEmit</a> <span class="fn">m</span></span>]</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[inst : <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest">LSpec.MonadTest</a> <span class="fn">m</span> <span class="fn">α</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(l : <span class="fn"><a href=".././Init/Prelude.html#List">List</a> <span class="fn">β</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">β</span> → <span class="fn"><span class="fn">m</span> <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">α</span></span></div></div><p>Interspersedly creates a <code><a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code> from each element <code>β</code> of a list with a
function <code>β → m <a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code> and runs the test sequence.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="LSpec.instMonadEmitIOInstMonadEIOError"><div class="instance"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L206-L207">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.instMonadEmitIOInstMonadEIOError">LSpec.instMonadEmitIOInstMonadEIOError</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadEmit">LSpec.MonadEmit</a> <a href=".././Init/System/IO.html#IO">IO</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.instMonadEmitIOInstMonadEIOError">LSpec.instMonadEmitIOInstMonadEIOError</a> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">emit</span> := <span class="fn">IO.println</span> }</span></span></li></ul></details></div></div><div class="decl" id="LSpec.instMonadTestIOInstMonadEIOErrorUInt32"><div class="instance"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L209-L210">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.instMonadTestIOInstMonadEIOErrorUInt32">LSpec.instMonadTestIOInstMonadEIOErrorUInt32</a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.MonadTest">LSpec.MonadTest</a> <a href=".././Init/System/IO.html#IO">IO</a> <a href=".././Init/Prelude.html#UInt32">UInt32</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.instMonadTestIOInstMonadEIOErrorUInt32">LSpec.instMonadTestIOInstMonadEIOErrorUInt32</a> <a href=".././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">success</span> := <span class="fn">0</span>, <span class="fn">failure</span> := <span class="fn">1</span>, <span class="fn">nEq</span> := <a href=".././LSpec/LSpec.html#LSpec.instMonadTestIOInstMonadEIOErrorUInt32.proof_1">LSpec.instMonadTestIOInstMonadEIOErrorUInt32.proof_1</a> }</span></span></li></ul></details></div></div><div class="decl" id="LSpec.lspecIO"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L223-L224">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.lspecIO">LSpec.lspecIO</a></span><span class="decl_args">
<span class="fn">(t : <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/System/IO.html#IO">IO</a> <a href=".././Init/Prelude.html#UInt32">UInt32</a></span></div></div><p>Runs a <code><a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code> with an output meant for the terminal.</p><p>This function is designed to be plugged to a <code>main</code> function from a Lean file
that can be compiled. Example:</p><pre><code class="language-lean">def main := <a href=".././LSpec/LSpec.html#LSpec.lspecIO">lspecIO</a> $
  <a href=".././LSpec/LSpec.html#LSpec.test">test</a> "four equals four" (4 = 4)
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.lspecIO">LSpec.lspecIO</a> <span class="fn">t</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.lspecM">LSpec.lspecM</a> <span class="fn">t</span></span></span></li></ul></details></div></div><div class="decl" id="LSpec.lspecEachIO"><div class="def"><div class="gh_link"><a href="https://github.com/yatima-inc/LSpec/blob/28c24d851c614b88f3c7f1874f29f393ee35ba8e/LSpec/LSpec.lean#L234-L235">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href=".././LSpec/LSpec.html#LSpec.lspecEachIO">LSpec.lspecEachIO</a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <span class="fn">Type u_1</span>}</span></span>
</span><span class="decl_args">
<span class="fn">(l : <span class="fn"><a href=".././Init/Prelude.html#List">List</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(f : <span class="fn"><span class="fn">α</span> → <span class="fn"><a href=".././Init/System/IO.html#IO">IO</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq">LSpec.TestSeq</a></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href=".././Init/System/IO.html#IO">IO</a> <a href=".././Init/Prelude.html#UInt32">UInt32</a></span></div></div><p>Runs a sequence of tests that are created from a <code><a href=".././Init/Prelude.html#List">List</a> α</code> and a function
<code>α → <a href=".././Init/System/IO.html#IO">IO</a> <a href=".././LSpec/LSpec.html#LSpec.TestSeq">TestSeq</a></code>. Instead of creating all tests and running them consecutively,
this function alternates between test creation and test execution.</p><p>It's rather useful for when the test creation process involves heavy
computations in <code><a href=".././Init/System/IO.html#IO">IO</a></code> (e.g. when <code>f</code> reads data from files and processes it).</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href=".././LSpec/LSpec.html#LSpec.lspecEachIO">LSpec.lspecEachIO</a> <span class="fn">l</span> <span class="fn">f</span></span> <a href=".././Init/Prelude.html#Eq">=</a> <span class="fn"><a href=".././LSpec/LSpec.html#LSpec.lspecEachM">LSpec.lspecEachM</a> <span class="fn">l</span> <span class="fn">f</span></span></span></li></ul></details></div></div></main>
<nav class="nav"><iframe src=".././/navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>